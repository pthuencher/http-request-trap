html
  head

    title HTTP Request Trap

    meta(name="viewport", content="width=device-width, initial-scale=1.0")

    link(rel="preconnect", href="https://fonts.gstatic.com")
    link(href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap", rel="stylesheet")
    link(href="https://fonts.googleapis.com/css2?family=Rammetto+One&display=swap", rel="stylesheet") 

    link(rel="stylesheet", href="/assets/css/style.css")
    script(src="/assets/js/functions.js") 

  body
    .header
            h2 HTTP - Request Trap
            div
                div
                    input.endpoint(value="http://"+locals.ip+":"+locals.port+"/trap", readonly=1)
                    button.endpoint-copy(onclick="copy_clipboard('.endpoint');") copy
            div
                button.reset(onclick="window.location = '/settings'") settings
                button.reload(onclick="location.reload();") reload
                button.reset(onclick="reset()") reset
    .content
        if reqs.length
            each req in reqs
                .req-panel
                    .req-info
                        span
                            span.req-index
                                strong #&nbsp;
                                span= req.index
                            span.req-method= req.method
                        span.req-time= req.dateUTCStr
                        
                    .req-data
                        .req-headers
                            table
                                tr
                                    td(colspan=2)
                                        input(value=req.url, readonly=1)
                                tr
                                    td
                                        strong Remote Address
                                    td
                                        input(value=req.remoteAddress, readonly=1)
                                        
                                each val, key in req.headers
                                    tr
                                        td
                                            strong= key
                                        td
                                            input(value=val, readonly=1)
                        .req-body
                            textarea(readonly=1)= req.body   
        div
            strong How to use:
            br
            br
            span Capture GET Requests via /trap
            br
            code= "curl http://"+locals.ip+":"+locals.port+"/trap"
            br
            br
            span Capture POST Requests via /trap
            br
            code= "curl -X POST http://"+locals.ip+":"+locals.port+"/trap -d \"foo=bar\""
            br
            br
            span Redirect Requests via /redirect
            br
            code= "curl -L http://"+locals.ip+":"+locals.port+"/redirect"
            br
            br
            span Serve HTML via /serve
            br
            code= "curl http://"+locals.ip+":"+locals.port+"/serve"
        